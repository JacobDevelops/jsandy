import { Canvas, Meta } from '@storybook/blocks';

import * as FocusScopeStories from './FocusScope.stories';

<Meta of={FocusScopeStories} />

# FocusScope Component

## Overview

The FocusScope component is a part of the @jsandy/ui package. It provides advanced focus management capabilities for React applications, allowing developers to control and manipulate focus behavior within specific areas of their user interface.

## Features

- Focus trapping: Prevents focus from leaving the designated scope
- Focus looping: Allows cycling through focusable elements when reaching the edges of the scope
- Auto-focus on mount and unmount
- Handles focus when elements are dynamically removed from the DOM

## Installation

To use the FocusScope component, ensure you have the @jsandy/ui package installed in your project:

```
npm install @jsandy/ui
```

## Usage

Here's a basic example of how to use the FocusScope component:

```jsx
import { FocusScope } from '@jsandy/ui/focus-scope';

function MyComponent() {
  return (
    <FocusScope trapped={true} loop={true}>
      <button>Button 1</button>
      <button>Button 2</button>
      <button>Button 3</button>
    </FocusScope>
  );
}
```

## Props

The FocusScope component accepts the following props:

- `loop` (boolean, default: false): When true, tabbing from the last item will focus the first tabbable element, and shift+tab from the first item will focus the last tabbable element.
- `trapped` (boolean, default: false): When true, focus cannot escape the focus scope via keyboard, pointer, or programmatic focus.
- `onMountAutoFocus` (function): Event handler called when auto-focusing on mount. Can be prevented.
- `onUnmountAutoFocus` (function): Event handler called when auto-focusing on unmount. Can be prevented.

Additionally, FocusScope accepts all props that can be passed to a `div` element.

## Advanced Usage

For more complex scenarios, you can leverage the auto-focus events:

```jsx
function MyAdvancedComponent() {
  const handleMountAutoFocus = (event) => {
    // Custom logic for autofocus on mount
    event.preventDefault(); // Prevent default autofocus behavior if needed
  };

  return (
    <FocusScope trapped={true} onMountAutoFocus={handleMountAutoFocus}>
      {/* Your focusable content here */}
    </FocusScope>
  );
}
```

## Notes

- The FocusScope component uses React's forwardRef, allowing you to pass a ref to the underlying div element if needed.
- The component includes internal focus management that handles edge cases such as focus retention when elements are removed from the DOM.
- For accessibility reasons, the natural tab order is maintained even for elements with positive tabIndex values.
